<%- include('header') %>
<body class="container">
    <div class="change-password-container">
        <div class="change-password-content">
            <h1 class="change-password-text">Change Password</h1>
            <form id="changePasswordForm" action="/changepassword" method="post" onsubmit="return validatePasswordForm()" novalidate>
                <div class="default-form-box">
                    <label>New Password</label>
                    <div class="password-container">
                        <input type="password" id="new-password" name="new-password" required>
                        <span class="eye-icon" onclick="togglePasswordVisibility('new-password')">
                            <i class="fas fa-eye"></i>
                        </span>
                    </div>
                    <div id="newPasswordError" class="error"></div>
                </div>
                <div class="default-form-box">
                    <label>Confirm Password</label>
                    <div class="password-container">
                        <input type="password" id="confirm-password" name="confirm-password" required>
                        <span class="eye-icon" onclick="togglePasswordVisibility('confirm-password')">
                            <i class="fas fa-eye"></i>
                        </span>
                    </div>
                    <div id="confirmPasswordError" class="error"></div>
                </div>
                <button type="submit" class="btn btn-primary">Change Password</button>
            </form>
        </div>
    </div>
    

    <script>
        function validatePasswordForm() {
            const newPassword = document.querySelector('input[name="new-password"]').value.trim();
            const confirmPassword = document.querySelector('input[name="confirm-password"]').value.trim();

            const newPasswordError = document.getElementById('newPasswordError');
            const confirmPasswordError = document.getElementById('confirmPasswordError');

            newPasswordError.textContent = '';
            confirmPasswordError.textContent = '';

            let isValid = true;

            if (newPassword === '') {
                newPasswordError.textContent = 'New Password field is required';
                isValid = false;
            }

            if (confirmPassword === '') {
                confirmPasswordError.textContent = 'Confirm Password field is required';
                isValid = false;
            }

            if (newPassword !== confirmPassword) {
                confirmPasswordError.textContent = 'Passwords do not match';
                isValid = false;
            }

            return isValid;
        }

        function togglePasswordVisibility(fieldName) {
            const passwordField = document.querySelector(`input[name="${fieldName}"]`);
            const eyeIcon = passwordField.nextElementSibling.querySelector('i');
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                eyeIcon.classList.remove('fa-eye');
                eyeIcon.classList.add('fa-eye-slash');
            } else {
                passwordField.type = 'password';
                eyeIcon.classList.remove('fa-eye-slash');
                eyeIcon.classList.add('fa-eye');
            }
        }
    </script>

    <style>
  .default-form-box {
    margin-bottom: 20px;
}

.password-container {
    position: relative;
    display: flex;
    align-items: center;
}

.password-container input[type="password"] {
    width: 100%;
    padding-right: 40px; /* Adjust padding to accommodate the eye icon */
    box-sizing: border-box;
    padding: 10px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.eye-icon {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    user-select: none;
    color: #999;
}

.eye-icon:hover {
    color: #333;
}

.btn-primary {
    display: inline-block;
    padding: 10px 20px;
    font-size: 16px;
    font-weight: 600;
    color: #fff;
    background-color: #b19361;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    text-align: center;
    text-decoration: none;
}

.btn-primary:hover {
    background-color: #040c16;
}

.error {
    color: red;
    font-size: 14px;
    margin-top: 5px;
}
    </style>
</body>
</html>
